<#import "/agent/module/settings/currencyFrame.html" as sframe>
<#import "/common/utils/html-generator.html" as htmlGen>
<#assign transforEnumToList = "au.com.isell.rlm.common.freemarker.func.EnumToList"?new()>
<#assign dataLoader = "au.com.isell.rlm.common.freemarker.func.DataLoader"?new()>

<@sframe.setting>
<div id="content">
	<@sframe.settingNavTabs "details"/>

	<div id="contentBody">
		<form action="#" autocomplete="off" method="post" id="detail-form">
			<div id="actionBar">
				<ul>
					<@shiro.hasPermission name="setting:edit">
					<li><button class="link-btn edit-btn" type="button">Edit</button></li>
					<li><button class="link-btn save-btn">Save</button></li>
					<li><button class="link-btn cancel-btn" type="reset">Cancel</button></li>
					</@shiro.hasPermission>
				</ul>
			</div>
			<div class="commonBox">
				<h2>Currency Details</h2>
				<table>
					<tr class="currency-item">
						<td>Name</td>
						<td>
							<div class="ui-widget searchable-combobox">
								<select name="currency.name"  reg="^.+$" tip="not blank">
									<option value="" data-currency-code="" data-currency-unit=""></option>
									<#assign dataList=dataLoader('au.com.isell.rlm.module.system.service.SystemService',"getDefaultCurrencies")> 
									<#list dataList as dataItem>
										<#if currency.name?? && currency.name?string==dataItem[0]?string>
											<option value="${dataItem[0]}" data-currency-code="${(dataItem[1])!}" data-currency-unit="${(dataItem[2])!}" selected="selected">${dataItem[0]}</option>
										<#else>
											<option value="${dataItem[0]}" data-currency-code="${(dataItem[1])!}" data-currency-unit="${(dataItem[2])!}">${dataItem[0]}</option>
										</#if>
									</#list>
								</select>
							</div>
						</td>
					</tr>

					<tr>
						<td>Code</td>
						<td><input type="text"  readonly="readonly" class="disabled" size="3" value="${(currency.code)!}" name="currency.code"/></td>
					</tr>
					<tr>
						<td>Symbol</td>
						<td><input type="text" size="3" value="${(currency.symbol)!}" name="currency.symbol"/></td>
					</tr>
				</table>
			</div>

			<div style="clear: both;"></div>
		</form>
	</div>
</div>
<script type="text/javascript" src="${sframe.resourceBasePath}/js/entry/agent/module/setting/currency-detail.js"></script>
</@sframe.setting>
