<#include '/common/frame/global-settings.html'>
	<div id="contentBody">
		<form action="${basePath}/resellers/${serialNo}/supplier-map/${oldSupplierId}.json" method="post" id="map-form" autocomplete="off">
		<input type="hidden" value='${serialNo}' name="serialNo"/>
		<div id="actionBar">
			<ul>
				<@shiro.hasPermission name="reseller:edit">
				<li><button class="link-btn edit-btn" type="button">Edit</button></li>
				<li><button class="link-btn save-btn" type="button">Save</button></li>
				<li><button class="link-btn cancel-btn" type="button">Cancel</button></li>
				</@shiro.hasPermission>
			</ul>
		</div>

		<div class="commonBox" style="width:100%">
			<h2>Reseller Supplier</h2>
			<table>
				<#-- <tr>	
					<td>Country</td>
					<td><select  ><option></option></select></td>
				</tr> -->

				<tr>
					<td>Supplier</td>
					<td>
						<div class="ui-widget searchable-combobox">
							<select  name="supplierId" id="supplier" reg="^.+$" tip="not blank" url="${basePath}/resellers/${serialNo}/supplier-map/${oldSupplierId}/supplier-check-duplicate.json">
								<option value=""></option>
								<#assign dataList=dataLoader('au.com.isell.rlm.module.supplier.service.impl.SupplierServiceImpl',"querySupplier4Combobox",'','')> 
								<@htmlGen.selOptions (data.supplierId)!'null' dataList {"key":"supplierId","display":"name"}/>
							</select></td>
						</div>
				</tr>

				<tr>
					<td>Break</td>
					<td>
						<select  id="priceBreak" name='priceBreakId' data-url="${basePath}/supplier/{0}/query-price-breaks.json" data-value='${data.priceBreakId!}'>
							<option value=""></option>
						</select>
					</td>
				</tr>

				<tr>
					<td>Full Feeds</td>
					<td><input type="checkbox" ${data.fullFeedsOnly?string('checked="checked"','')} name='fullFeedsOnly'/><span>Full Feeds Only</span></td>
				</tr>
				<tr>	
					<td>Tiers</td>
					<td><input type="checkbox" name="useOriginalTiers"  ${((data.useOriginalTiers)?string( "checked='checked'",""))!} /><span>Use Original Tiers</span></td>
				</tr>
				<tr>
					<td><br />Customer</td>
					<td><br />
					<input type="checkbox" ${data.existingCustomer?string('checked="checked"','')} name='existingCustomer'/><span>Existing Customer</span></td>
				</tr>
				<tr>
					<td>Account</td>
					<td><input   type="text" size="20" name='supplierAccountNumber' value='${data.supplierAccountNumber!}'/></td>
				</tr>

				<tr id="requireLoginName">
					<td>Login</td>
					<td><input   type="text" size="20" name='supplierUsername' value='${data.supplierUsername!}'/></td>
				</tr>

				<tr id="requireLoginPassword">
					<td>Password</td>
					<td><input   type="text" size="20" name='supplierPassword' value='${data.supplierPassword!}'/></td>
				</tr>

				<tr>
					<td><br />Status</td>
					<td><br />
						<select name='status'>
						<#assign dataList=transforEnumToList('au.com.isell.rlm.module.reseller.domain.ResellerSupplierMap$ApprovalStatus',"false")> 
						<@htmlGen.selOptions data.status!'null' dataList {"key":"key","display":"name"}/>
						</select></td>
				</tr>

				<tr>
					<td>Granted Date</td>
					<td>
						<input type="date" size="20" value='${(data.approvalDate?date)!}'  name="approvalDate"/>
					<input type="button" id="clear-calendar" class="clear-calendar-btn" /></td>
				</tr>

				<tr>
					<td>Details</td>
					<td><textarea   rows="3" cols="20" name='approveDetails'>${data.approveDetails!}</textarea></td>
				</tr>
			</table>
		</div>
		</form>
		<div style="clear: both;"></div>
		<div class="commonBox" style="width:100%">
			<h2>History</h2>
			<#if histories??>
				<ul>
				<#list histories as item>
					<#if item.formImport?? && item.formImport>
					<li>${(item.operate)!} via ${(item.via)!}</li>
					<#else>
					<li>${(item.operate)!} on ${(item.date?datetime)!} <#if item.userName??>by ${item.userName}</#if> via ${(item.via)!}</li>
					</#if>
				</#list>
				</ul>
			</#if>
		</div>
		<div style="clear: both;"></div>
		<br>
	</div>
