<#import "/agent/module/resellers/resellerFrame.html" as rframe>
<#import "/module/address/address.html" as addr>
<#include "/common/frame/global-settings.html">

<@rframe.reseller>
<style type="text/css">
	#opeartion-history tbody tr:HOVER{
		cursor: pointer;
		background: #ddd;
	}
</style>
<div id="content">
	<@rframe.resellerNavTabs "detail"/>

	<div id="contentBody">
		<form action="#" autocomplete="off" method="post" id="detail-form">
			<div id="actionBar">
				<ul>
				<#if !(historyId??)>
					<@shiro.hasPermission name="reseller:edit">
						<li><button class="link-btn edit-btn" type="button">Edit</button></li>
						<li><button class="link-btn save-btn">Save</button></li>
						<li><button class="link-btn cancel-btn" type="reset">Cancel</button></li>
						<li><button class="link-btn" type="button" id="viewHistory" data-url='${basePath}/users/operation-history.json?targetId=${serialNo}&targetType=Reseller'>History</button></li>
					</@shiro.hasPermission>
				</#if>
				</ul>
			</div>
			
			<#include 'resellerDetailsPart1.html'>

			<div class="commonBox">
				<h2>Registration</h2>
				<table>
					<tr>
						<td>Serial Number</td>
						<td><input class="disabled" readonly="readonly" type="text" size="20" value="${(reseller.serialNo)!}" name="reseller.serialNo" id='serialNo'/></td>
					</tr>

					<tr>
						<td>Created</td>
						<td>
							<#if (reseller.createdDatetime)??>
								<#assign dateStr=reseller.createdDatetime?datetime>
							<#else>
								<#assign dateStr=''>
							</#if>
							<input class="disabled" disabled="disabled" type="text" size="20"
								value='${dateStr}' name="reseller.createdDatetime"/></td>
					</tr>
					
					<tr>
						<td>Type</td>
						<td><select name="reseller.type"> <#assign
								resellerTypeDataList=transforEnumToList('au.com.isell.rlm.module.reseller.domain.Reseller$ResellerType',"false")> <@htmlGen.selOptions
								reseller.type resellerTypeDataList {"key":"key","display":"name"}/>
						</select></td>
					</tr>

					<tr>
						<td>Status</td>
						<td><select disabled="disabled" name="reseller.status"> <#assign
								statusTypeDataList=transforEnumToList('au.com.isell.rlm.module.reseller.domain.Reseller$ResellerStatus',"false")> <@htmlGen.selOptions
								(reseller.status)!'null' statusTypeDataList {"key":"key","display":"name"}/>
						</select></td>
					</tr>

					<tr>
						<td>Agency</td>
						<td><select disabled="disabled" name="reseller.agencyId" id="agentId">
							 <#assign
								dataList=dataLoader('au.com.isell.rlm.module.agent.service.AgentService',"getAgencyList")> 
								<@htmlGen.selOptions (reseller.agencyId)!'null' dataList {"key":"agentId","display":"name"}/>
						</select></td>
					</tr>

					<tr>
						<td>Sales Rep</td>
						<td>
							<select  name="reseller.salesRepID" data-value='${reseller.salesRepID!}' id="salesRepId" data-url='${basePath}/users/sales-repos/{0}.json'></select>
						</td>
					</tr>
					<tr>
						<td class="topAligned">Bulk Email cc*</td>
						<td><textarea rows="10" cols="35" name="reseller.email_cc">${(reseller.email_cc)!}</textarea></td>
					</tr>
					<tr>
						<td></td>
						<td>* comma seperated</td>
					</tr>
				</table>
			</div>

			<#include 'resellerDetailsPart3.html'>

			<div style="clear: both;"></div>
		</form>
	</div>
</div>

<script type="text/javascript" src="${rframe.resourceBasePath}/js/module/address/choose.js"></script>
<script type="text/javascript" src="${rframe.resourceBasePath}/js/entry/agent/module/reseller/reseller-detail.js"></script>
<script type="text/javascript" src="${rframe.resourceBasePath}/js/entry/agent/module/reseller/reseller-history.js"></script>

<div id='opeartion-history' style='display:none;'>
	<table  id="history-table" class="maxWidthTable sortable withBorder">
		<thead>
			<tr>
				<th>User Name</th>
				<th>IP Address</th>
				<th>Date</th>
			</tr>
		</thead>
		
	</table>
</div>
</@rframe.reseller>
